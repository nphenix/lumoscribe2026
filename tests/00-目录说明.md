# tests/ 目录说明

> 本文件记录 tests 目录中所有文件的用途，自动同步更新。
> 根据项目宪章 P10 规范维护。

## 文件列表

| 文件 | 用途 | 更新日期 |
|------|------|----------|
| `00-目录说明.md` | 本文件，记录 tests 目录文件索引 | 2026-01-22 |
| `conftest.py` | pytest 配置与测试环境通用夹具 | 2026-01-22 |
| `test_api_basic.py` | API 基础能力测试（health、错误格式） | 2026-01-16 |
| `test_content_generation.py` | T096 白皮书生成端到端测试（真实 KB + 真实 LLM，in-process TestClient） | 2026-01-22 |
| `test_document_cleaning.py` | 文档清洗相关能力测试 | 2026-01-22 |
| `test_knowledge_base.py` | 知识库构建/查询能力测试 | 2026-01-22 |
| `test_llm_config_api.py` | LLM 配置与提示词 API 测试 | 2026-01-16 |
| `test_llm_thinking_mode.py` | 中台“思考模式开关”对 MiniMax-M2.1 的参数注入策略测试 | 2026-01-22 |
| `test_mineru_cleaning.py` | MinerU 解析/清洗能力测试 | 2026-01-22 |
| `test-outline-llm-polish.py` | outline_polish 的 LLM/structured output 链路测试 | 2026-01-28 |
| `test-outline-recognition.py` | 大纲识别与结构抽取规则测试 | 2026-01-28 |
| `test_outline_polish.py` | 大纲润色服务测试（兼容同步包装） | 2026-01-28 |
| `test_sankey_cycle_fallback.py` | 桑基图循环检测与回退策略测试 | 2026-01-28 |
| `test_arch_refactor_utils.py` | 架构重构新增工具函数与适配器的单元测试 | 2026-01-28 |
| `integration/test_whitepaper_generation_pipeline.py` | 阶段2白皮书生成集成测试：结构/重复段落/图表占位符布局观测 | 2026-01-29 |
| `fixtures/` | 测试夹具数据目录（阶段3 chart_json 样例） | 2026-01-29 |
| `test_antv_spec_mapper_unit.py` | 阶段3 AntV 映射层单元测试 | 2026-01-29 |

## 更新日志

| 日期 | 操作 | 文件 | 说明 |
|------|------|------|------|
| 2026-01-16 | 新增 | 00-目录说明.md | 创建 tests 目录文件索引 |
| 2026-01-16 | 新增 | conftest.py | 统一 pytest 临时目录基准路径（优先 F:\\temp\\pytest） |
| 2026-01-16 | 新增 | test_api_basic.py | 添加 API 基础能力单元测试 |
| 2026-01-16 | 新增 | test_llm_config_api.py | 添加 LLM 配置与提示词测试 |
| 2026-01-22 | 修改 | 00-目录说明.md | 补全 tests 目录文件列表，新增思考模式开关相关测试索引 |
| 2026-01-22 | 新增 | test_llm_thinking_mode.py | 增加 MiniMax-M2.1 思考模式开关（reasoning_split）注入策略测试 |
| 2026-01-28 | 修改 | 00-目录说明.md | 补全当前 tests 目录文件列表并新增重构相关测试索引 |
| 2026-01-28 | 新增 | test_arch_refactor_utils.py | 覆盖上下文组装工具、并发召回工具与 embedding 适配器的回归测试 |
| 2026-01-29 | 新增 | integration/test_whitepaper_generation_pipeline.py | 新增阶段2白皮书生成集成测试（T204） |
| 2026-01-29 | 新增 | fixtures/ | 新增阶段3 chart_json 样例夹具目录 |
| 2026-01-29 | 新增 | test_antv_spec_mapper_unit.py | 新增 AntV 映射层单元测试（阶段3） |

## 管理规则

### 创建文件

1. 填写文件用途说明
2. 更新本文件的相关列表
3. 添加时间戳（YYYY-MM-DD 格式）

### 更新文件

1. 修改用途说明（如有必要）
2. 更新时间戳

### 删除文件

1. 从列表中移除记录
2. 在「更新日志」中添加删除日志

详见 [`speckit/constitution.md`](speckit/constitution.md) P10 文件说明管理规范。
