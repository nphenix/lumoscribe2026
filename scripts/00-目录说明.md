# scripts/ 目录说明

> 本文件记录 scripts 目录中所有文件的用途，自动同步更新。
> 根据项目宪章 P10 规范维护。

## 文件列表

| 文件 | 用途 | 更新日期 |
|------|------|----------|
| `00-目录说明.md` | 本文件，记录 scripts 目录文件索引 | 2026-01-15 |
| `sync-skills.ps1` | 同步 speckit/ 目录到 .cursor/、.roo/、.trae/ | 2026-01-12 |
| `sync-skills.cmd` | Windows CMD 批处理脚本（调用 ps1） | 2026-01-12 |
| `init-db.py` | 数据库初始化脚本（创建表、索引） | 2026-01-16 |
| `verify-db.py` | 数据库验证脚本（检查表结构、连接） | 2026-01-16 |
| `check-models.py` | 检查数据库中的模型数据来源 | 2026-01-18 |
| `check-providers.py` | 检查 Provider 数据并测试 API 连通性（OpenAI/Ollama/FlagEmbedding） | 2026-01-18 |
| `cleanup-default-models.py` | 清理无效的默认模型（关联到不存在 Provider 的模型） | 2026-01-18 |
| `update-doc-cleaning-prompt.py` | T097 前置：将 `doc_cleaning:clean_text` 最新提示词写入 SQLite 并设为激活版本 | 2026-01-18 |
| `update-chart-extraction-prompt.py` | T094 前置：将 `chart_extraction:extract_json` 最新提示词写入 SQLite 并设为激活版本 | 2026-01-19 |
| `update-chart-extraction-callsite.py` | T094 前置：为 `chart_extraction:extract_json` 写入 callsite 配置（如 format=json）以强制严格 JSON 输出 | 2026-01-19 |
| `t094-pic-to-json.py` | T094：图转 JSON 批处理正式运行入口（复制到 data/pic_to_json/workspace 后处理） | 2026-01-19 |
| `t097-clean-intermediates.py` | T097：批量清洗 `data/intermediates` 下的 Markdown，并同步过滤图片与 JSON，输出到新目录 | 2026-01-18 |
| `t095-reset-kb.py` | T095：知识库状态清理/重置脚本（删除 collections 与可选清理 kb_chunks 工件，便于测试初始化） | 2026-01-21 |

## 更新日志

| 日期 | 操作 | 文件 | 说明 |
|------|------|------|------|
| 2026-01-18 | 新增 | `check-models.py` | 添加模型数据检查脚本 |
| 2026-01-18 | 新增 | `check-providers.py` | 添加 Provider 数据检查脚本 |
| 2026-01-18 | 新增 | `cleanup-default-models.py` | 添加清理无效默认模型脚本 |
| 2026-01-18 | 新增 | `update-doc-cleaning-prompt.py` | T097 前置：同步更新文档清洗提示词到 SQLite |
| 2026-01-19 | 新增 | `update-chart-extraction-prompt.py` | T094 前置：同步更新图转 JSON 提示词到 SQLite |
| 2026-01-19 | 新增 | `update-chart-extraction-callsite.py` | T094 前置：同步更新图转 JSON 调用点配置（format=json） |
| 2026-01-19 | 新增 | `t094-pic-to-json.py` | T094：新增图转 JSON 正式运行脚本入口 |
| 2026-01-18 | 新增 | `t097-clean-intermediates.py` | T097：批量清洗 intermediates 并同步调整图片/JSON |
| 2026-01-21 | 新增 | `t095-reset-kb.py` | T095：新增知识库状态清理/重置脚本（测试初始化） |
| 2026-01-16 | 新增 | `init-db.py` | 添加数据库初始化脚本 |
| 2026-01-16 | 新增 | `verify-db.py` | 添加数据库验证脚本 |
| 2026-01-15 | 新增 | `00-目录说明.md` | 创建 scripts 目录文件索引 |
| 2026-01-12 | 新增 | `sync-skills.ps1` | 添加 speckit 同步脚本 |
| 2026-01-12 | 新增 | `sync-skills.cmd` | 添加 CMD 包装脚本 |

## 管理规则

### 创建文件

1. 填写文件用途说明
2. 更新本文件的「文件列表」
3. 添加时间戳（YYYY-MM-DD 格式）

### 更新文件

1. 修改用途说明（如有必要）
2. 更新时间戳

### 删除文件

1. 从「文件列表」中移除记录
2. 在「更新日志」中添加删除日志

详见 [`speckit/constitution.md`](speckit/constitution.md) P10 文件说明管理规范。
