---
description: debug, error, bug, issue, problem, diagnostic, trace, troubleshooting
---
---
name: debug-diagnostic
description: "debug, error, bug, issue, problem, diagnostic, trace, troubleshooting"
allowed-tools:
  - read_file
  - execute_command
  - list_files
---

# 调试诊断器

## 用途

本技能记录开发过程中发现的 bug、问题和意外行为的调试过程。它捕获从症状识别到根因分析和解决的完整诊断过程。

## 使用时机

在以下情况下调用此技能：
- 开发过程中发现 bug 或问题
- 需要调查意外行为
- 生产事件需要事后分析
- 需要保留调试知识
- 应该记录经验教训

## 不使用时机

- 记录功能规格时（使用 spec-generator）
- 规划实施方案时（使用 plan-creator）
- 创建新功能时
- 计划变更但尚未实现时（使用 change-manager）

## 输入要求

### 最小输入

- 问题或 bug 描述
- 环境信息
- 重现步骤

### 理想输入

- 错误消息和日志
- 预期与实际行为
- 已执行的调查
- 建议的解决方案
- 相关变更或功能

## 输出规范

### 文件路径

```
speckit/specs/debug/[kebab-case-问题-id]/debug.md
```

## 工作流程

### 第一步：记录症状

1. 记录问题描述
2. 捕获环境详情
3. 记录重现步骤
4. 记录错误消息和日志

### 第二步：根因分析

1. 形成关于潜在原因的假设
2. 定义验证方法
3. 系统地测试假设
4. 记录最终结论

### 第三步：设计解决方案

1. 识别修复方法
2. 规划实施步骤
3. 定义验证策略
4. 准备回滚计划

### 第四步：记录解决方案

1. 记录修复实施
2. 记录代码变更
3. 捕获验证命令
4. 更新相关文档

### 第五步：提取经验

1. 识别做得好的地方
2. 注意需要改进的地方
3. 定义后续行动
4. 与团队分享知识

## 质量检查清单

在最终确定调试指南之前：

- [ ] 症状已清晰描述
- [ ] 环境已完整记录
- [ ] 重现步骤可操作
- [ ] 假设已系统测试
- [ ] 根因已准确识别
- [ ] 解决方案具体且可实施
- [ ] 已提供验证命令
- [ ] 代码变更已记录
- [ ] 经验教训已捕获
- [ ] 文档全程使用中文
- [ ] 时间戳格式为 YYYY-MM-DD
- [ ] 文件路径符合约定

## 相关模板

- `speckit/templates/debug-template.md` - 此技能生成的模板
- `speckit/constitution.md` - 需要遵循的质量标准
- `change-manager` - 如果修复需要变更提案的相关技能

## 版本

| 版本 | 日期 | 变更内容 |
|------|------|---------|
| 1.0.0 | 2026-01-12 | 初始版本 |
| 1.1.0 | 2026-01-12 | 添加统一的 allowed-tools 格式 |

